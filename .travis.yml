language: csharp
os:
  - linux # Ubuntu 14.04
  - osx

# .NET CLI require Ubuntu 14.04
# See also https://github.com/dotnet/core/blob/master/Documentation/prereqs.md
sudo: required
dist: trusty
addons:
  apt:
    packages:
    - gettext
    - libcurl4-openssl-dev
    - libicu-dev
    - libssl-dev
    - libunwind8
    - zlib1g

mono:
  - latest

# .NET CLI require OSX 10.10
osx_image: xcode7.3

install:
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then brew update; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then brew install openssl; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then ln -s /usr/local/opt/openssl/lib/libcrypto.1.0.0.dylib /usr/local/lib/; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then ln -s /usr/local/opt/openssl/lib/libssl.1.0.0.dylib /usr/local/lib/; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then brew list; fi

script:
  - ./build.sh --target Travis --configuration Debug --verbosity diagnostic
  #- ./build.sh --target Travis --configuration Release
